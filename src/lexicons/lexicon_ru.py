import pytz
from aiogram.types import CallbackQuery
from datetime import datetime
from typing import Optional, Union

from src.schemas import customer_schemas, delivery_schemas, order_schemas
from src.services import get_status_name_by_id
from src.callbacks import (
    TimeOrdersCallbackFactory,
    CheckOrdersCallbackFactory,
    OrderStatusCallbackFactory
)

LEXICON_RU: dict[str, str] = {
    'start':
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à—É –ø–∏—Ü—Ü–µ—Ä–∏—é! –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∞—É—Ç–µ–Ω—Ç–∏—á–Ω—ã–º–∏ "
        "–≤–∫—É—Å–∞–º–∏ –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ–º —Å–≤–µ–∂–∏—Ö –ø–∏—Ü—Ü –Ω–∞ –∫–∞–∂–¥—ã–π –≤–∫—É—Å.",
    'main_menu':
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à—É –ø–∏—Ü—Ü–µ—Ä–∏—é! –û—Ç–≤–µ–¥–∞–π—Ç–µ –∏—Å—Ç–∏–Ω–Ω—ã–µ –∏—Ç–∞–ª—å—è–Ω—Å–∫–∏–µ "
        "–≤–∫—É—Å—ã —Å 15:00 –¥–æ 23:00. –ù–µ–∂–Ω–æ–µ —Ç–µ—Å—Ç–æ, —Å–æ—á–Ω—ã–µ –Ω–∞—á–∏–Ω–∫–∏ –∏ —É—é—Ç–Ω–∞—è "
        "–∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∂–¥—É—Ç –≤–∞—Å!\n\n",
    'store': "–ù–∞—à–µ –º–µ–Ω—é",
    'delivery': '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏ –ø–æ –¥–æ—Å—Ç–∞–≤–∫–µ üõµ'
                '\n\n–°—Ç–æ–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ —Ä–∞–π–æ–Ω–∞–º:'
                '\nMorjim 100r'
                '\nAshwem 150r'
                '\nAgarvado 150r'
                '\nSiolim 200r'
                '\n–ú–∞ndrem 200r'
                '\nUpper Mandrem 250r'
                '\n–êrambol 250r'
                '\nVagator 350r'
                '\n–ö–µrim 350r'
                '\nPaliem 350r\n\n'
                'P.s. –ü—Ä–∏ –æ—Ñ–æ—Ä–º–µ–Ω–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–ª–µ–¥—É–π—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞)',
    'contact': 'Pizzeria Marcelloüçïüçù\n\n'
               '–°–∞–º–∞—è –ò—Ç–∞–ª—å—è–Ω—Å–∫–∞—è –ø–∏—Ü—Ü–∞ –≤ –ì–æ–∞üçïüçùüî•.\n\n'
               '–ú–æ—Ä–¥–∂–∏–º, Turtle Beach road.\n\n'
               '–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –ø–∏—à–∏—Ç–µ –∏–ª–∏ –∑–≤–æ–Ω–∏—Ç–µ\n'
               '@AyratZiganshin59\n+918149843927\n\n'
               '<a href="t.me/PizzaGoaFood">–ù–∞—à–∞ –≥—Ä—É–ø–ø–∞ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º</a>',
    'edit_cart': '–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—è –∫–Ω–æ–ø–∫–∏: '
                 '"‚ûï", "‚ûñ" –∏–ª–∏ "‚úñÔ∏è".\n\n'
                 '"‚ûï" - –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë 1 –µ–¥–∏–Ω–∏—Ü—É —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É\n\n'
                 '"‚ûñ" - —É–±—Ä–∞—Ç—å 1 –µ–¥–∏–Ω–∏—Ü—É —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã\n\n'
                 '"‚úñÔ∏è" - –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä\n\n'
                 '–¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É, '
                 '–Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É "–û—á–∏—Å—Ç–∏—Ç—å"\n\n',
    'personal_area': '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç.\n\n'
                 '–í—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–≤–æ–∏—Ö –∑–∞–∫–∞–∑–æ–≤, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å'
                 ' –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥—Ä–æ–±–Ω–µ–µ"\n\n'
                 '"–û—Ç–º–µ–Ω–∏—Ç—å ‚úñÔ∏è" - –∫–Ω–æ–ø–∫–∞, –¥–ª—è –æ—Ç–º–µ–Ω—ã –∑–∞–∫–∞–∑–∞\n\n'
                 '<i>–û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ –≤–æ–∑–º–æ–∂–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–∏ '
                 '15 –º–∏–Ω—É—Ç, –ø–æ—Å–ª–µ –µ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</i>',
    'category': '–ß—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å?',
    'closing_time_reminder': '–í–Ω–∏–º–∞–Ω–∏–µ, –≤ 23:00 –º—ã –∑–∞–∫—Ä—ã–≤–∞–µ–º—Å—è, –Ω–æ —É –≤–∞—Å –µ—â—ë '
                             '–µ—Å—Ç—å –≤—Ä–µ–º—è) –Ω–µ –∑–∞—Ç—è–≥–∏–≤–∞–π—Ç–µ —Å –≤—ã–±–æ—Ä–æ–º)',
    'closing_time': '–£–ø—Åsrc..((\n\n–ò–∑–≤–∏–Ω–∏—Ç–µ, –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è.\n'
                    '–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å 15:00 –¥–æ 23:00.\n'
                    '–ë—É–¥–µ–º —Ä–∞–¥—ã –Ω–∞–∫–æ—Ä–º–∏—Ç—å –≤–∞—Å –≤ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã)',
    'finish_category': '–ò–∑–≤–∏–Ω–∏—Ç–µ, –±–ª—é–¥–∞ –∏–∑ –¥–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–µ–π—á–∞—Å –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å'
                       ', –æ–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è, –∞ –ø–æ–∫–∞ –º–æ–∂–µ—Ç–µ '
                       '–∑–∞–∫–∞–∑–∞—Ç—å —á—Ç–æ-–Ω–∏–±—É–¥—å –¥—Ä—É–≥–æ–µ)',
    'cart_text': '–í–∞—à –∑–∞–∫–∞–∑:\n\n',
    'empty_cart': '–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞',
    'cart_error': '–¢–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç!',
    'delivery_districts': '–î–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç—å—Ç–µ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ '
                          '–Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤, –±—É–∫–≤–∞–ª—å–Ω–æ –ø–∞—Ä–∞ –º–∏–Ω—É—Ç.\n\n'
                          '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–π–æ–Ω, –∫—É–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑',
    'delivery_districts': '–î–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç—å—Ç–µ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ '
                          '–Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤, –±—É–∫–≤–∞–ª—å–Ω–æ –ø–∞—Ä–∞ –º–∏–Ω—É—Ç.\n\n'
                          '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–π–æ–Ω, –∫—É–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑',
    'abort_delivery': '–í—ã –ø—Ä–µ—Ä–≤–∞–ª–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏.\n\n',
    'order_saved_message': '–í–∞—à –∑–∞–∫–∞–∑ –ø–æ –ø—Ä–µ–∂–Ω–µ–º—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω–µ, '
                           '–≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –≤ –ª—é–±–æ–µ '
                           '—É–¥–æ–±–Ω–æ–µ –¥–ª—è –í–∞—Å –≤—Ä–µ–º—è.',
    'phone_input': '–ê —Ç–µ–ø–µ—Ä—å –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –º–µ—Å—Ç–Ω—ã–π (–ò–Ω–¥–∏–π—Å–∫–∏–π) –Ω–æ–º–µ—Ä '
                   '—Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "7812345678", –±–µ–∑ +91. '
                   '–ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –º–µ—Å—Ç–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞, '
                   '–Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —à–∞–≥"',
    'phone_number_error_message': '–ü–æ—Ö–æ–∂–µ –≤ –Ω–æ–º–µ—Ä–µ –¥–æ–ø—É—â–µ–Ω–∞ –æ—à–∏–±–∫–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ '
                                  '–ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–æ–º–µ—Ä–∞\n\n'
                                  '–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ '
                                  '10 —Ü–∏—Ñ—Ä\n\n'
                                  '–ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç—É –º–µ—Å—Ç–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞, '
                                  '–Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —à–∞–≥"',
    'delivery_comment_prompt': '–û–∫–µ–π, –∏–¥–µ–º –¥–∞–ª—å—à–µ.\n\n'
                               '–¢–µ–ø–µ—Ä—å –Ω–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –∫—É—Ä—å–µ—Ä–∞.\n\n'
                               '–ï—Å–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –Ω–µ—Ç, '
                               '–Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —à–∞–≥")',
    'location_request_step': '–°—É–ø–µ—Ä, –æ—Å—Ç–∞–ª—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥ –∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏))\n\n'
                             '–¢–µ–ø–µ—Ä—å –ø—Ä–∏—à–ª–∏—Ç–µ –í–∞—à—É –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é\n\n'
                             '–í–ê–ñ–ù–û. –î–ª—è –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ '
                             '–æ—Ç–ø—Ä–∞–≤–∫—É –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Ç–µ–ª–µ–≥—Ä–∞–º.\n\n'
                             '–ï—Å–ª–∏ –Ω–µ—Ç –≤–æ–∑–º–æ–¥–Ω–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é, '
                             '–Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —à–∞–≥" –∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞—à–∏–º '
                             '–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º, –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞ '
                             '@AyratZiganshin59',
    'error_comment': '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –∫–∞–∫–∞—è-—Ç–æ –æ—à–∏–±–∫–∞src..\n\n'
                     '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –∫–æ–º–µ–Ω—Ç–∞—Ä–∏—è –¥–ª—è –∫—É—Ä—å–µ—Ä–∞\n\n'
                     '–ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —à–∞–≥"',
    'error_location': '–¢–æ, —á—Ç–æ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –Ω–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –ª–æ–∫–∞—Ü–∏—é\n\n'
                      '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ —É–±–µ–¥–∏—Ç–µ—Å—Ç—å, —á—Ç–æ –í—ã '
                      '–ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç–µ –∏–º–µ–Ω–Ω–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ\n\n'
                      '–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã - '
                      '–Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü—Ä–µ—Ä–≤–∞—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ ‚ùå"',
    'done_fsm_delivery': '–î–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É.',
    'use_buttons_for_districts': '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–Ω–æ–ø–∫–∞–º–∏ '
                                 '–ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ä–∞–π–æ–Ω–∞\n\n–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å'
                                 ' –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏ - –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É '
                                 '"–ü—Ä–µ—Ä–≤–∞—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ ‚ùå"',
    'skip': '–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —à–∞–≥',
    'good': '–û—Ç–ª–∏—á–Ω–æ!\n\n',
    'comment_input_cancelled': '–í—ã –æ—Ç–º–µ–Ω–∏–ª–∏ –≤–≤–æ–¥ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è.\n\n',
    'error': '–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å',
    'store_not_active': '–í –Ω–∞—Å—Ç–æ—è—â–∏–π –º–æ–º–µ–Ω—Ç –Ω–∞—à–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç',
    'non_working_hours': '–£–ø—Å...((\n\n–ò–∑–≤–∏–Ω–∏—Ç–µ, –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è.\n'
                         '–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å 15:00 –¥–æ 23:00.\n'
                         '–ë—É–¥–µ–º —Ä–∞–¥—ã –Ω–∞–∫–æ—Ä–º–∏—Ç—å –≤–∞—Å –≤ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã)',
}

LEXICON_KEYBOARDS_RU: dict[str, str] = {
    'menu': '–ù–∞—à–µ –º–µ–Ω—é',
    'main_menu': '–ù–∞—à–∞ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞',
    'group_telegram': '–ù–∞—à–∞ –≥—Ä—É–ø–ø–∞',
    'contact': '–ù–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã',
    'delivery': '–£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏',
}


LEXICON_KEYBOARDS_RU: dict[str, str] = {
    'menu': '–ù–∞—à–µ –º–µ–Ω—é',
    'main_menu': '–ù–∞—à–∞ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞',
    'group_telegram': '–ù–∞—à–∞ –≥—Ä—É–ø–ø–∞',
    'contact': '–ù–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã',
    'delivery': '–£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏',
    'sale': '–ù–∞—à–∏ –∞–∫—Ü–∏–∏',
    'cart': '–ö–æ—Ä–∑–∏–Ω–∞',
    'feedback': '–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤',
    'clear': '–û—á–∏—Å—Ç–∏—Ç—å',
    'edit': '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å',
    'free_delivery': '–°–∞–º–æ–≤—ã–≤–æ–∑',
    'delivery_pay': '–î–æ—Å—Ç–∞–≤–∫–∞ üöö',
    'delivery_done': '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É üöö',
    'check_balance': '–¢–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏',
    'add_products': '–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç',
    'check_orders': '–ó–∞–∫–∞–∑—ã –≤ –æ—á–µ—Ä–µ–¥–∏',
    'check_done_orders': '–ó–∞–∫–∞–∑—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã–µ',
    'balance': '–¢–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏',  # —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª—å
    'search_orders': '–ü–æ–∏—Å–∫ –∑–∞–∫–∞–∑–∞ –ø–æ –Ω–æ–º–µ—Ä—É',
    'yes': '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑',
    'order_done': '–í—ã–ø–æ–ª–Ω–µ–Ω–æ ‚úîÔ∏è',
    'denied': '–û—Ç–∫–∞–∑ ‚úñÔ∏è',
    'go_delivery': '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑',  # —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª—å
    'back': '<<< –Ω–∞–∑–∞–¥',
    'back_menu': '–ú–µ–Ω—é –±–æ—Ç–∞',
    'comment': '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É',
    'location': '–ù–∞—à–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è',
    'change_count_products': '–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤',
    'cancel': '–ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã',
    'cancel_2': '–ü—Ä–µ—Ä–≤–∞—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ ‚ùå',
    'skip': '–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —à–∞–≥',
    'cancel_category': '–û—Ç–º–µ–Ω–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ',


    'edit_menu': '–†–µ–¥–∞–∫—Ç–æ—Ä–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é',
    'exit_admin_menu': '–ó–∞–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å',


    'report_today': '–ü—Ä–æ–¥–∞–∂–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è',
    'report_month': '–ü—Ä–æ–¥–∞–∂–∏ –∑–∞ –º–µ—Å—è—Ü',
    'report_all_time': '–ü—Ä–æ–¥–∞–∂–∏ –∑–∞ –≤–µ—Å—å –ø–µ—Ä–∏–æ–¥',
    'reports': '–û—Ç—á–µ—Ç—ã',

    'admin_menu': '<<< –Ω–∞–∑–∞–¥',  # —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª—å
    'superadmin_menu': '–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –ø–∞–Ω–µ–ª—å',

    'del_locations': '–°–∫—Ä—ã—Ç—å –ª–æ–∫–∞—Ü–∏—é',
    'del_product': '–£–¥–∞–ª–∏—Ç—å –±–ª—é–¥–æ ‚ùå',
    'add_category': '–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é',
    'del_category': '–£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é ‚ùå',

    'admin_list': '–°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤',
    'update_role_personal': '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤',
    'del_admin': '–£–¥–∞–ª–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ‚ùå',
    'add_superadmin': '–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è',
    'del_superadmin': '–£–¥–∞–ª–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è ‚ùå',

    'cancel_personal': '–û—Ç–º–µ–Ω–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚ùå',

    'personal_account': '–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç',

    'stop_list': '–°—Ç–æ–ø-–ª–∏—Å—Ç',

    'accept_order': '–ü—Ä–∏–Ω—è—Ç—å',
    'reject_order': '–û—Ç–∫–ª–æ–Ω–∏—Ç—å',

    'cutlery': '–ü—Ä–∏–±–æ—Ä—ã',

    'admin': '–ê–¥–º–∏–Ω–∫–∞',
}


LEXICON_COMMANDS_RU: dict[str, str] = {
    '/start': '–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞',
}


def cart_text(
        bill: int,
        order_text: str,
        order_comment: Optional[str] = None,
        box_price: Optional[int] = None
):
    if not order_comment:
        message = (
            '–í–∞—à –∑–∞–∫–∞–∑:\n\n'
            f'{order_text}'
            "--------------------\n"
            f'–ò—Ç–æ–≥–æ –±–µ–∑ —Å–∫–∏–¥–∫–∏: {bill} ‚Çπ\n'
            f'–°–∫–∏–¥–∫–∞: {bill*0.05} ‚Çπ\n'
            f'–ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π: {bill*0.95} ‚Çπ\n'
        )
    else:
        message = (
            '–í–∞—à –∑–∞–∫–∞–∑:\n\n'
            f'{order_text}'
            "--------------------\n"
            f'–ò—Ç–æ–≥–æ –±–µ–∑ —Å–∫–∏–¥–∫–∏: {bill} ‚Çπ\n'
            f'–ò—Ç–æ–≥–æ —Ü–µ–Ω–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π: {bill * 0.95} ‚Çπ\n'
            f'–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É: {order_comment}\n'
        )
    if box_price and box_price > 0:
        message += (
            f'–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç–∞ –∑–∞ —É–ø–∞–∫–æ–≤–∫—É: {box_price} ‚Çπ\n'
            "--------------------\n"
            f'–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ:: {bill * 0.95 + box_price} ‚Çπ\n'
        )
    return message


async def new_order_mess_text_order_chat(
        order_text: str,
        data_order: order_schemas.CreateOrder,
        order_info: Optional[order_schemas.CreateOrderInfo] = None,
        delivery_village: Optional[delivery_schemas.ReadDelivery] = None,
        user_info: Optional[customer_schemas.CustomerBase] = None,
        box_price: Optional[int] = None,
        callback: Optional[CallbackQuery] = None,
):
    desired_timezone = pytz.timezone('Asia/Kolkata')

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–æ–Ω–æ–π
    current_time = datetime.now(desired_timezone)

    total_price = data_order.total_price
    sale_price = total_price*0.95

    user_id = user_info.user_id if user_info else callback.message.chat.id
    first_name = user_info.first_name if user_info else callback.message.chat.first_name  # noqa: E501
    username = user_info.username if user_info else callback.message.chat.username  # noqa: E501

    customer_comment = (
        order_info.order_comment
        if order_info.order_comment is not None
        else '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'
    )

    order_header = (
        f"–ó–ê–ö–ê–ó ‚Ññ{order_info.order_id} –æ—Ç "
        f"{current_time.strftime('%d.%m.%Y')} –≤ "
        f"{current_time.strftime('%H:%M')}\n"
        f"–¢–ò–ü –ó–ê–ö–ê–ó–ê: {data_order.order_type}\n"
        "--------------------\n"
    )

    customer_info = (
        "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ:\n"
        f"–ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞: {user_id}\n"
        f"–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞: {first_name}\n"
        f"–°—Å—ã–ª–∫–∞ tg: @{username}\n"
        "--------------------\n"
    )

    order_details = (
        "–ó–∞–∫–∞–∑:\n\n"
        f"{order_text}"
        f"\n–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É: {customer_comment}\n"
        "--------------------"
        f"\n–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞: {total_price} ‚Çπ\n"
        f'–°–∫–∏–¥–∫–∞: {total_price*0.05} ‚Çπ\n'
        f"\n–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞ —Å —É—á—ë—Ç–æ–º —Å–∫–∏–¥–∫–∏: {sale_price} ‚Çπ\n"
    )
    if box_price and box_price > 0:
        sale_price += box_price
        order_details += (
            f'–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç–∞ –∑–∞ —É–ø–∞–∫–æ–≤–∫—É: {box_price} ‚Çπ\n'
            "--------------------\n"
            f'–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ:: {sale_price} ‚Çπ\n'
        )

    chat_text = (
        order_header + customer_info + order_details
    )

    user_text = (
        order_header + order_details
    )

    if data_order.order_type == "–î–æ—Å—Ç–∞–≤–∫–∞":
        delivery_price = delivery_village.price

        delivery_info = (
            "--------------------\n"
            f"–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏: {delivery_price} —Ä—É–ø.\n"
            f"–ò—Ç–æ–≥–æ (–∑–∞–∫–∞–∑ + –¥–æ—Å—Ç–∞–≤–∫–∞): {sale_price + delivery_price} ‚Çπ\n"
            "--------------------\n"
            f"–†–∞–π–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏: {delivery_village.name}\n"
        )

        courier_info = (
            f"–ò–Ω–¥–∏–π—Å–∫–∏–π –Ω–æ–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞: {order_info.customer_phone}\n"
            f"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –∫—É—Ä—å–µ—Ä–∞: {order_info.delivery_comment}\n"

        )
        if (
            order_info.delivery_latitude
            and
            order_info.delivery_longitude
        ):
            courier_info += (
                "–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º\n"
            )
        else:
            courier_info += (
                "--------------------\n"
                "<b>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–∏–ª –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é. "
                "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∫–ª–∏–µ–Ω—Ç–æ–º –¥–ª—è "
                "—É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏\n</b>"
            )

        chat_text += delivery_info + courier_info

        user_text += delivery_info

    status_info = (
        "--------------------\n"
        f"–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: {data_order.order_status}\n"

    )

    cancel_text = (
        "--------------------\n"
        '<i>–í —Å–ª—É—á–∞–µ –æ—Ç–º–µ–Ω—ã –∑–∞–∫–∞–∑–∞ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –ª–∏—á–Ω—ã–º –∫–∞–±–∏–Ω–µ—Ç–æ–º. '
        '–û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–∏ 15 –º–∏–Ω—É—Ç.\n'
        '(–ú–µ–Ω—é –±–æ—Ç–∞ -> –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç -> *–Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞* -> "–û—Ç–º–µ–Ω–∏—Ç—å ‚úñÔ∏è")</i>'
    )

    chat_text += status_info
    user_text += status_info + cancel_text

    return chat_text, user_text


def get_comments_prompt_message():
    message = (
        '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–∏—à–ª–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –Ω–∞—à–∏—Ö –ø–æ–≤–∞—Ä–æ–≤.'
        f' –î–ª—è –æ—Ç–º–µ–Ω—ã –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "{LEXICON_KEYBOARDS_RU["cancel"]}"'
    )
    return message


def generate_order_info_time_text(callback_data: TimeOrdersCallbackFactory):
    desired_timezone = pytz.timezone('Asia/Kolkata')

    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–æ–Ω–æ–π
    current_time = datetime.now(desired_timezone)
    message = (
        "--------------------\n"
        f"–ó–∞–∫–∞–∑ ‚Ññ {callback_data.order_id} –æ—Ç "
        f"{current_time.strftime('%d.%m.%Y')}\n"
        f"–í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è: {callback_data.time} –º–∏–Ω—É—Ç\n"
    )
    if callback_data.order_type == 2:
        message += (
            f"–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ–µ–∑–¥–∫–∏: {callback_data.time_del} –º–∏–Ω—É—Ç"
        )
    return message


async def generate_order_info_text(
    callback_data: Union[
        CheckOrdersCallbackFactory,
        OrderStatusCallbackFactory
    ]
):
    status = await get_status_name_by_id(callback_data.status)
    desired_timezone = pytz.timezone('Asia/Kolkata')

    current_time = datetime.now(desired_timezone)
    message = (
        "--------------------\n"
        f"–ó–∞–∫–∞–∑ ‚Ññ {callback_data.order_id} –æ—Ç "
        f"{current_time.strftime('%d.%m.%Y')}\n"
        f"–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: {status}"
    )
    return message
